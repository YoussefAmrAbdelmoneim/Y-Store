<div class="pt-16 min-h-screen">
  <section class="py-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
    <div
      class="bg-white dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl p-6 shadow-xl border border-gray-200 dark:border-gray-700"
    >
      <div class="flex flex-col md:flex-row gap-6 items-center">
        <div class="flex-grow relative w-full">
          <div
            class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
          >
            <i class="fas fa-search text-gray-400 dark:text-gray-500"></i>
          </div>
          <input
            type="text"
            [(ngModel)]="value"
            placeholder="Search for product..."
            class="w-full pl-12 pr-5 py-3.5 bg-white/80 dark:bg-gray-900/80 border border-gray-300/50 dark:border-gray-600/50 rounded-xl text-gray-800 dark:text-gray-200 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/50 shadow-sm transition-all duration-300"
          />
        </div>
        <div class="relative w-full md:w-64">
          <div
            class="absolute inset-y-0 right-3 flex items-center pointer-events-none"
          >
            <i
              class="fas fa-chevron-down text-gray-400 dark:text-gray-500 text-xs"
            ></i>
          </div>
          <select
            (change)="sortProducts($event)"
            class="appearance-none w-full pl-5 pr-10 py-3.5 bg-white/80 dark:bg-gray-900/80 border border-gray-300/50 dark:border-gray-600/50 rounded-xl text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/50 shadow-sm transition-all duration-300"
          >
            <option value="default">Sort Collections</option>
            <option value="lowToHigh">Price: Low to High</option>
            <option value="highToLow">Price: High to Low</option>
            <option value="a-z">A to Z</option>
            <option value="z-a">Z to A</option>
          </select>
        </div>
      </div>

      <section
        id="featured"
        class="py-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto"
      >
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
          @for (product of products() |search :value; track product.id) {
          <div
            [routerLink]="['/products', product.id]"
            class="group relative cursor-pointer block"
          >
            <div
              class="relative h-full overflow-hidden rounded-3xl bg-white dark:bg-gray-900 shadow-xl hover:shadow-2xl transition-all duration-500 border border-gray-100 dark:border-gray-800 hover:border-blue-200 dark:hover:border-blue-900/50"
            >
              <div
                class="absolute inset-0 rounded-3xl pointer-events-none overflow-hidden"
              >
                <div
                  class="absolute inset-0 border-2 border-transparent group-hover:border-blue-400/20 group-hover:opacity-100 transition-all duration-700 rounded-3xl"
                ></div>
              </div>

              <div
                class="relative pt-[100%] bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 overflow-hidden"
              >
                <img
                  [src]="product.image"
                  [alt]="product.title"
                  class="absolute top-0 left-0 w-full h-full object-contain p-10 transition-transform duration-700 group-hover:scale-110"
                />

                <div
                  class="absolute inset-0 bg-gradient-to-br from-white/0 via-white/30 to-white/0 dark:from-black/0 dark:via-black/20 dark:to-black/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"
                ></div>

                <div
                  class="absolute bottom-6 left-6 flex items-center bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-sm border border-gray-100 dark:border-gray-800 transform group-hover:scale-105 transition-transform duration-300"
                >
                  <div class="flex mr-1">
                    <i class="fas fa-star text-amber-400 text-sm"></i>
                  </div>
                  <span
                    class="text-sm font-semibold text-gray-800 dark:text-gray-200"
                  >
                    {{ product.rating.rate }}
                    <span class="text-gray-500"
                      >({{ product.rating.count }})</span
                    >
                  </span>
                </div>

                @if (product.rating.rate >= 4.5) {
                <div
                  class="absolute top-6 right-6 bg-gradient-to-r from-amber-500 to-amber-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md transform group-hover:scale-110 transition-transform duration-300"
                >
                  <i class="fas fa-crown mr-1"></i> Premium Pick
                </div>
                }
              </div>

              <div class="p-7">
                <h3
                  class="text-xl font-bold text-gray-900 dark:text-white mb-3 leading-tight tracking-tight group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300"
                >
                  {{ product.title }}
                </h3>
                <p
                  class="text-gray-500 dark:text-gray-400 text-sm mb-5 line-clamp-2"
                >
                  {{ product.description }}
                </p>

                <div class="flex items-center justify-between mb-5">
                  <div class="flex items-center">
                    <div class="relative w-24 h-4 mr-2">
                      <div class="absolute inset-0 flex">
                        @for (star of [1,2,3,4,5]; track star) {
                        <div
                          class="w-full h-full border-r border-gray-200 dark:border-gray-700 last:border-r-0"
                        >
                          <div
                            class="h-full bg-gray-100 dark:bg-gray-800"
                          ></div>
                        </div>
                        }
                      </div>
                      <div
                        class="absolute inset-0 flex overflow-hidden"
                        [style.width]="(product.rating.rate / 5) * 100 + '%'"
                      >
                        @for (star of [1,2,3,4,5]; track star) {
                        <div
                          class="w-full h-full bg-gradient-to-r from-amber-400 to-amber-500"
                        ></div>
                        }
                      </div>
                    </div>
                    <span
                      class="text-xs font-medium text-gray-500 dark:text-gray-400"
                    >
                      {{ product.rating.rate }}/5
                    </span>
                  </div>

                  @if (product.rating.rate >= 4) {
                  <div
                    class="text-xs font-semibold px-2.5 py-1 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-sm transform group-hover:scale-105 transition-transform duration-300"
                  >
                    <i class="fas fa-gem mr-1"></i> @if (product.rating.rate >=
                    4.5) { Collector's Choice } @else { Highly Rated }
                  </div>
                  }
                </div>

                <div
                  class="pt-5 border-t border-gray-100 dark:border-gray-800 group-hover:border-blue-100 dark:group-hover:border-blue-900/30 transition-colors duration-300"
                >
                  <span
                    class="text-2xl font-bold text-blue-600 dark:text-blue-400"
                    >{{ product.price | currency }}</span
                  >
                  <span
                    class="ml-3 text-sm text-gray-500 dark:text-gray-400 line-through opacity-0 group-hover:opacity-100 transition-opacity duration-300"
                  >
                    {{ product.price * 1.2 | currency }}
                  </span>
                </div>
              </div>

              <div
                class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-500"
              >
                <div class="absolute top-0 right-0 w-16 h-16 overflow-hidden">
                  <div
                    class="absolute -right-8 -top-8 w-32 h-32 rotate-45 bg-gradient-to-r from-blue-500/10 to-indigo-600/10"
                  ></div>
                </div>
                <div class="absolute bottom-0 left-0 w-16 h-16 overflow-hidden">
                  <div
                    class="absolute -left-8 -bottom-8 w-32 h-32 rotate-45 bg-gradient-to-r from-pink-500/10 to-amber-500/10"
                  ></div>
                </div>
              </div>
            </div>
          </div>
          }
        </div>
      </section>
      @if ((products() | search:value).length === 0 && value) {
      <div class="py-16 text-center">
        <div class="max-w-md mx-auto">
          <div class="w-24 h-24 mx-auto mb-6 text-gray-300 dark:text-gray-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
          </div>
          <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">
            No products found
          </h3>
          <p class="text-gray-500 dark:text-gray-400 mb-6">
            We couldn't find any products matching "{{ value }}". Try different
            keywords.
          </p>
          <button
            (click)="value = ''"
            class="px-6 py-3 cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
          >
            Clear Search
          </button>
        </div>
      </div>
      }
    </div>
  </section>
</div>
